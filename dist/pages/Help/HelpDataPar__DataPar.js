import ExpandMoreIcon from "@mui/icons-material/ExpandMore";
import Accordion from "@mui/material/Accordion";
import AccordionDetails from "@mui/material/AccordionDetails";
import AccordionSummary from "@mui/material/AccordionSummary";
import Box from "@mui/material/Box";
import DialogContent from "@mui/material/DialogContent";
import DialogContentText from "@mui/material/DialogContentText";
import Divider from "@mui/material/Divider";
import Stack from "@mui/material/Stack";
import Typography from "@mui/material/Typography";
import React, { useState } from "react";
import { DialogTitleH4 } from "../../components/TypographyComponents/DialogTitle";
import { BulletPointList } from "./HelpStyledComponents";
import HelperImage__EASLGithubExample from "../../assets/img/HelperImages/HelperImage__EASLGithubExample.png";
import HelperImage__EASLCompiledExample from "../../assets/img/HelperImages/HelperImage__EASLCompiledExample.png";
import HelperImage__MATLABRuntimeExample from "../../assets/img/HelperImages/HelperImage__MATLABRuntimeExample.png";
import HelperImage__DataParStudyRootExample from "../../assets/img/HelperImages/HelperImage__DataParStudyRootExample.png";
import HelperImage__DataParSubjectsToIncludeExample from "../../assets/img/HelperImages/HelperImage__DataParSubjectsToIncludeExample.png";
import HelperImage__DataParLoadDataParJSONExample from "../../assets/img/HelperImages/HelperImage__DataParLoadDataParJSONExample.png";
import { SecureLink } from "../../components/NavComponents";
function HelpDataPar__DataPar() {
    const { api } = window;
    const [expanded, setExpanded] = useState(false);
    const handleAccordionChange = (panel) => (event, isExpanded) => {
        setExpanded(isExpanded ? panel : false);
    };
    return (React.createElement(React.Fragment, null,
        React.createElement(DialogTitleH4, null, "Help Page Define Parameters"),
        React.createElement(DialogContent, null,
            React.createElement(Stack, { spacing: 1 },
                React.createElement(DialogContentText, null, "Select a question that best describes your concern."),
                React.createElement("section", null,
                    React.createElement(Accordion, { expanded: expanded === "panel__whatdoesthedataparmoduledo", onChange: handleAccordionChange("panel__whatdoesthedataparmoduledo") },
                        React.createElement(AccordionSummary, { expandIcon: React.createElement(ExpandMoreIcon, null) },
                            React.createElement(Typography, null, "What does the \"Define Data Parameters\" part of the program do?")),
                        React.createElement(Divider, null),
                        React.createElement(AccordionDetails, null,
                            React.createElement("p", null, "Primarily, this portion of the program has two objectives:"),
                            React.createElement(BulletPointList, null,
                                React.createElement("li", null, "To fine-tune and modify the execution behavior of ExploreASL. For example, perhaps you wish avoid motion correction processing. Or you may want to control which subjects are processed and which aren't without necessarily removing them from the dataset."),
                                React.createElement("li", null, "To provide backup values in the event of missing metadata, often due to the anonymization process of DICOMs. When relevant values are not found in the metadata files accompanying each imported NIFTI image, the values defined in this portion of the program will act as a substitute."))))),
                React.createElement("section", null,
                    React.createElement(Accordion, { expanded: expanded === "panel__how_do_I_reuse_parameters", onChange: handleAccordionChange("panel__how_do_I_reuse_parameters") },
                        React.createElement(AccordionSummary, { expandIcon: React.createElement(ExpandMoreIcon, null) },
                            React.createElement(Typography, null, "I'd like to reuse some of the earlier parameters. Is there a shortcut to avoid re-defining all of them each time?")),
                        React.createElement(Divider, null),
                        React.createElement(AccordionDetails, null,
                            React.createElement("p", null, "Yes! At the bottom of the window, you should be able to see a button which says \"LOAD\". Click on this to bring up a file dialog window and select the file called dataPar.json which is located within the study root folder."),
                            React.createElement("br", null),
                            React.createElement("p", null, "Note that there is another dataPar.json present inside the derivatives/ExploreASL subfolder path. Do not select that one, as it is an internal copy that ExploreASL uses for its own purposes. Only load from the one located at the study root folder."),
                            React.createElement("br", null),
                            React.createElement(Box, { mx: "auto", display: "block", maxWidth: 700, component: "img", src: HelperImage__DataParLoadDataParJSONExample })))),
                React.createElement("section", null,
                    React.createElement(Accordion, { expanded: expanded === "panel_whatisexploreasltype", onChange: handleAccordionChange("panel_whatisexploreasltype") },
                        React.createElement(AccordionSummary, { expandIcon: React.createElement(ExpandMoreIcon, null) },
                            React.createElement(Typography, null, "What is ExploreASL Type?")),
                        React.createElement(Divider, null),
                        React.createElement(AccordionDetails, null,
                            React.createElement("p", null, "There are two versions of ExploreASL that can be run:"),
                            React.createElement(BulletPointList, null,
                                React.createElement("li", null, "from the Github repository"),
                                React.createElement("li", null, "as a packaged & compiled folder")),
                            React.createElement("br", null),
                            React.createElement("p", null, "These have different requirements regarding ancillary software needed to run them."),
                            React.createElement("br", null),
                            React.createElement("p", null,
                                "The",
                                " ",
                                React.createElement(SecureLink, { href: "https://github.com/ExploreASL/ExploreASL" }, "Github version of ExploreASL"),
                                " ",
                                "requires an activated version of MATLAB 2019a or later."),
                            React.createElement("br", null),
                            React.createElement("p", null,
                                "The packaged version of ExploreASL requires a MATLAB Runtime of version 2019a or later. The primary advantage of this option is that MATLAB Runtime is free. Click",
                                " ",
                                React.createElement(SecureLink, { href: "https://www.mathworks.com/products/compiler/matlab-runtime.html" }, "here"),
                                " ",
                                "to be taken to download a MATLAB Runtime for your system.")))),
                React.createElement("section", null,
                    React.createElement(Accordion, { expanded: expanded === "panel_whatisexploreaslpath", onChange: handleAccordionChange("panel_whatisexploreaslpath") },
                        React.createElement(AccordionSummary, { expandIcon: React.createElement(ExpandMoreIcon, null) },
                            React.createElement(Typography, null, "What is ExploreASL Path?")),
                        React.createElement(Divider, null),
                        React.createElement(AccordionDetails, null,
                            React.createElement("p", null, "This is the filepath to the root folder of the ExploreASL program that will be used. This folder differs depending on the value chosen for the \"ExploreASL Type\" field."),
                            React.createElement("br", null),
                            React.createElement("p", null, "If the Github (standard) version of ExploreASL was selected, this should be the folder, typically called \"ExploreASL\" that was downloaded from the repository. You can confirm this is the appropriate folder if it contains the following structure:"),
                            React.createElement(Box, { mx: "auto", display: "block", maxWidth: 500, component: "img", src: HelperImage__EASLGithubExample }),
                            React.createElement("br", null),
                            React.createElement("br", null),
                            React.createElement("p", null, "Therefore, a typical filepath to supply would be, for example:"),
                            api.platform === "win32" ? (React.createElement("p", null, "C:\\Users\\JohnDoe\\MATLAB\\ExploreASL")) : (React.createElement("p", null, "/home/JohnDoe/MATLAB/ExploreASL")),
                            React.createElement("br", null),
                            React.createElement("p", null, "Otherwise, if it is the packaged (compiled) version, the the file structure within differs:"),
                            React.createElement(Box, { mx: "auto", display: "block", maxWidth: 500, component: "img", src: HelperImage__EASLCompiledExample }),
                            React.createElement("br", null),
                            React.createElement("br", null),
                            React.createElement("p", null, "For the packaged version, note that there may also be an extra folder that appears called \"xASL_latest_mcr\". It is created the first time that the packaged version of ExploreASL is run and should not be deleted.")))),
                React.createElement("section", null,
                    React.createElement(Accordion, { expanded: expanded === "panel__whatismatlabruntimepath", onChange: handleAccordionChange("panel__whatismatlabruntimepath") },
                        React.createElement(AccordionSummary, { expandIcon: React.createElement(ExpandMoreIcon, null) },
                            React.createElement(Typography, null, "What is MATLAB Runtime Path")),
                        React.createElement(Divider, null),
                        React.createElement(AccordionDetails, null,
                            React.createElement("p", null,
                                "Firstly, this is only a necessary field if you intend to use the packaged/compiled version of ExploreASL (not the one from the Github repository). You can (and should) leave this field blank if you intend to use the ExploreASL version originating from Github. Otherwise, start by ensuring you have followed",
                                " ",
                                React.createElement(SecureLink, { href: "https://www.mathworks.com/help/compiler/install-the-matlab-runtime.html" }, "the appropriate steps from the MATLAB website"),
                                "."),
                            React.createElement("br", null),
                            React.createElement("p", null, "The folder that you're looking for to specify for the GUI has the format v## (i.e. v97). A typical location of this can be, for example:"),
                            api.platform === "win32" ? (React.createElement("p", null, "C:\\Users\\JohnDoe\\MATLAB\\MATLAB_Runtime\\v97")) : (React.createElement("p", null, "/home/JohnDoe/MATLAB/MATLAB_Runtime/v97")),
                            React.createElement("br", null),
                            React.createElement("p", null, "This v## folder typically has the following structure:"),
                            React.createElement(Box, { mx: "auto", display: "block", maxWidth: 500, component: "img", src: HelperImage__MATLABRuntimeExample })))),
                React.createElement("section", null,
                    React.createElement(Accordion, { expanded: expanded === "panel__whatisstudyrootfolder", onChange: handleAccordionChange("panel__whatisstudyrootfolder") },
                        React.createElement(AccordionSummary, { expandIcon: React.createElement(ExpandMoreIcon, null) },
                            React.createElement(Typography, null, "What is the Study Root Folder?")),
                        React.createElement(Divider, null),
                        React.createElement(AccordionDetails, null,
                            React.createElement("p", null, "This is the root folder of your overall study that should adhere to Brain Imaging Data Structure (BIDS) standard in order to be useable by ExploreASL."),
                            React.createElement("br", null),
                            React.createElement("p", null, "After running the Import module, your study's root folder should contain 3 subfolders that follow BIDS format:"),
                            React.createElement(BulletPointList, null,
                                React.createElement("li", null, "sourcedata, containing the initial scanner data"),
                                React.createElement("li", null, "rawdata, converted scans into NIFTI format"),
                                React.createElement("li", null, "derivatives, analyses of NIFTI data")),
                            React.createElement("br", null),
                            React.createElement("p", null, "This root folder is the filepath that should be provided to this field."),
                            React.createElement("br", null),
                            React.createElement(Box, { mx: "auto", display: "block", maxWidth: 700, component: "img", src: HelperImage__DataParStudyRootExample })))),
                React.createElement("section", null,
                    React.createElement(Accordion, { expanded: expanded === "panel__whatissubjectstoinclude", onChange: handleAccordionChange("panel__whatissubjectstoinclude") },
                        React.createElement(AccordionSummary, { expandIcon: React.createElement(ExpandMoreIcon, null) },
                            React.createElement(Typography, null, "How do I indicate subjects that I'd like processed or explicitly excluded?")),
                        React.createElement(Divider, null),
                        React.createElement(AccordionDetails, null,
                            React.createElement("p", null,
                                "You can drag & drop (or select with a dialog window by clicking BROWSE) the subjects' folders that are contained within the ",
                                React.createElement("strong", null, "rawdata"),
                                " folder."),
                            React.createElement("br", null),
                            React.createElement("p", null,
                                "Do not select subjects that may be located within ",
                                React.createElement("strong", null, "sourcedata"),
                                " or from",
                                " ",
                                React.createElement("strong", null, "derivatives"),
                                ". This is done to prevent any naming discrepancies from confusing the program."),
                            React.createElement("br", null),
                            React.createElement(Box, { mx: "auto", display: "block", maxWidth: 700, component: "img", src: HelperImage__DataParSubjectsToIncludeExample })))),
                React.createElement("section", null,
                    React.createElement(Accordion, { expanded: expanded === "panel__whatisM0Type", onChange: handleAccordionChange("panel__whatisM0Type") },
                        React.createElement(AccordionSummary, { expandIcon: React.createElement(ExpandMoreIcon, null) },
                            React.createElement(Typography, null, "What is M0 Type?")),
                        React.createElement(Divider, null),
                        React.createElement(AccordionDetails, null,
                            React.createElement("p", null,
                                "This field refers to whether there was a proton-density scan (M0) acquired for your dataset. As per",
                                " ",
                                React.createElement(SecureLink, { href: "https://pubmed.ncbi.nlm.nih.gov/24715426/" }, "ASL Consensus Paper"),
                                ", a proton density image is required to scale the final perfusion image into clinically relevant units of mL / 100g / min. There are two possiblities here:"),
                            React.createElement(BulletPointList, null,
                                React.createElement("li", null,
                                    "The user has acquired a proton-density scan. If so, select the option: \"",
                                    React.createElement("strong", null, "M0 Scan is present in the dataset"),
                                    "\".\u00A0"),
                                React.createElement("li", null,
                                    "The user did not acquire a proton-density scan. A substitute will have to be generated using the mean of the control ASL images. Select \"",
                                    React.createElement("strong", null, "Use mean of control ASL scans as M0 substitute"),
                                    "\" to have ExploreASL follow this behavior.")),
                            React.createElement("br", null),
                            React.createElement("p", null, "There are important factors to take into account when deciding which option to take:\u00A0"),
                            React.createElement(BulletPointList, null,
                                React.createElement("li", null, "It is possible to select the second option even if there is an M0 scan that was acquired. This necessary when only certain scans have an M0 scan and others do not."),
                                React.createElement("li", null,
                                    "If the second option is selected and the field \"Number of Background Suppression Pulses\" is non-zero,",
                                    " ",
                                    React.createElement("strong", null, "then the background suppression \u00A0timings must be specified in the \"Background Suppression Pulse Timings\" field"),
                                    ". This is necessary in order to adjust calculations for said suppression pulses."))))),
                React.createElement("section", null,
                    React.createElement(Accordion, { expanded: expanded === "panel__whataboutCASL", onChange: handleAccordionChange("panel__whataboutCASL") },
                        React.createElement(AccordionSummary, { expandIcon: React.createElement(ExpandMoreIcon, null) },
                            React.createElement(Typography, null, "My study used the older Continuous ASL labeling method, but that isn't an option. What do I do?")),
                        React.createElement(Divider, null),
                        React.createElement(AccordionDetails, null,
                            React.createElement("p", null, "Specify \"Pseudo-continuous ASL\" for the \"Labeling Type\" field. Continuous and Pseudo-continuous methods undergo identical quantification.")))),
                React.createElement("section", null,
                    React.createElement(Accordion, { expanded: expanded === "panel__whatisslicereadouttime", onChange: handleAccordionChange("panel__whatisslicereadouttime") },
                        React.createElement(AccordionSummary, { expandIcon: React.createElement(ExpandMoreIcon, null) },
                            React.createElement(Typography, null, "What is the Slice Readout Time and how do I know what value to provide?")),
                        React.createElement(Divider, null),
                        React.createElement(AccordionDetails, null,
                            React.createElement("p", null, "The SliceReadoutTime is a parameter that is needed for quantification of 2D ASL acquisitions as the timing of the readout of each slice (and hence quantification) differs. For 3D, this parameter can be ignored. Otherwise, the estimation of this parameter depends on the labeling type."),
                            React.createElement("br", null),
                            React.createElement("p", null, "For pulsed ASL acquisitions, it can be estimated as:"),
                            React.createElement("br", null),
                            React.createElement("p", { style: { marginLeft: "1rem" } },
                                React.createElement("strong", null, "(minTR - TI) / numOfSlices")),
                            React.createElement("br", null),
                            React.createElement("p", null, "Where minTR is the minimal repetition time. This is a standard value that should be available in the DICOM files or in the scanner protocol export. TI is the inversion time. numOfSlices is the number of 2D slices that make up a volume. All times mentioned should be calculated using milliseconds."),
                            React.createElement("br", null),
                            React.createElement("p", null, "For pseudo-continuous (or continuous) ASL acquisitions, it can be estimated as: "),
                            React.createElement("br", null),
                            React.createElement("p", { style: { marginLeft: "1rem" } },
                                React.createElement("strong", null, "(minTR - PLD - LabelDur) / numOfSlices")),
                            React.createElement("br", null),
                            React.createElement("p", null, "Where minTR and numOfSlices is the same as for the pulsed ASL case. PLD is the post-label delay and LabelDur is the mean labeling duration; both of these are fields you should have already specified in their respective fields within this module. All times mentioned should be calculated using milliseconds."),
                            React.createElement("br", null),
                            React.createElement("p", null, "As a rough estimate, SliceReadoutTime is typically anywhere between 20-50 milliseconds. Values outside of this range should be treated as atypical.")))),
                React.createElement("section", null,
                    React.createElement(Accordion, { expanded: expanded === "panel__partialvolumecorrectisonlyinnativespace", onChange: handleAccordionChange("panel__partialvolumecorrectisonlyinnativespace") },
                        React.createElement(AccordionSummary, { expandIcon: React.createElement(ExpandMoreIcon, null) },
                            React.createElement(Typography, null, "I see partial volume correct settings? Do they only apply to native space CBF images?")),
                        React.createElement(Divider, null),
                        React.createElement(AccordionDetails, null,
                            React.createElement("p", null, "Unfortunately at the current time, the main ExploreASL pipeline does not support applying partial volume correction to MNI-standard space CBF images. There are custom scripts available in the repository on Github, but they haven't been implemented at the current time."),
                            React.createElement("br", null),
                            React.createElement("p", null, "So, yes, unfortunately the partial volume correction settings only apply to native space images."))))))));
}
export default HelpDataPar__DataPar;
//# sourceMappingURL=HelpDataPar__DataPar.js.map